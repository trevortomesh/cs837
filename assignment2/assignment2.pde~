import controlP5.*;
import java.util.*;

ControlP5 control1, control2;
String ctrl1, ctrl2;
int c1, c2;

Table rawData;

int drawPointSize = 10;
int windowWidth = 800; 
int windowHeight = 600;
Cereal[] cereals;
int index;

int offsetx = 10; 
int offsety = 10; 

int[] scale = {50, 50};

void settings(){
  size(windowWidth,windowHeight); 

}

void setup(){
  rawData = loadTable("cereal.csv", "header");

  println(rawData.getRowCount() + " total rows in table"); 
  cereals = new Cereal[rawData.getRowCount()];
  int index = 0;

  for (TableRow row : rawData.rows()) {
    cereals[index] = new Cereal(
    row.getString("name"),
    row.getString("mfr"),
    row.getString("type"),
    float(row.getString("calories")),
    float(row.getString("protein")),
    float(row.getString("fat")),
    float(row.getString("sodium")),
    float(row.getString("fiber")),
    float(row.getString("carbo")),
    float(row.getString("sugars")),
    float(row.getString("shelf")),
    float(row.getString("potass")),
    float(row.getString("vitamins")),
    float(row.getString("weight")),
    float(row.getString("cups")));
    index++;
  }
  /*
  control1 = new ControlP5(this);
  List l1 = Arrays.asList("calories","protein","fat","sodium","fiber","carbohydrates",
  "sugars","shelf","potassium","vitamins","weight","cups");
  control1.addScrollableList("dropdown")
     .setPosition(100, 100)
     .setSize(200, 100)
     .setBarHeight(20)
     .setItemHeight(20)
     .addItems(l1);
     
     
  control2 = new ControlP5(this);
  List l2 = Arrays.asList("calories","protein","fat","sodium","fiber","carbohydrates",
  "sugars","shelf","potassium","vitamins","weight","cups");
  control2.addScrollableList("dropdown")
     .setPosition(300, 100)
     .setSize(200, 100)
     .setBarHeight(20)
     .setItemHeight(20)
     .addItems(l2); */  
      
}

void draw(){
  clear();
  update();  
  }
  
void update(){
  drawPoints();
 // drawHUD();
  //drawAxes();
  
}  


void drawHUD(){  
}

void drawAxes(){ 
  
 stroke(255,255,255); 
 fill(#000000);
 strokeWeight(10);
 line(offsetx,windowHeight-offsety,windowWidth-offsetx, windowHeight-offsety); 
 line(offsetx, offsety, offsetx, windowHeight-offsety);  
 
 strokeWeight(1);
 for(float line = 0; line < 20; line+=0.1){
 line(float(offsetx-20), offsety+line, float(offsetx+20), offsety+line);
 }
 
 for(float line = 0; line < 20; line+=0.01){
   line(float(offsetx-10), offsety+line, float(offsetx+10), offsety+line);
 }
 
 for(float line = 0; line < 365; line+=30){
   line(offsetx+line, offsety-10, offsetx+line, offsety+10);
 } 
}


//---------------------------------------------------------------------
void drawPoints(){
  for(int i = 0; i < cereals.length; i++){
      fill(#FFFFFF);
      //stroke(1);
      //float drawPointSize = 10;
      //ellipse(cereals[i].properties[c1]*scale[0],cereals[i].properties[c2]*scale[1], drawPointSize, drawPointSize); 
      //fill(#FFFFAA);
      //drawPointSize = 20;
      ellipse(cereals[i].calories*50,cereals[i].fat*50, 10, 10); 
      println(cereals[i].calories);

      }
    }

//----------------------------------------------------------------
/*void dropdown(int n) {
  control1.get(ScrollableList.class, "dropdown").getItem(n); 
  control2.get(ScrollableList.class, "dropdown").getItem(n); 
   c1 = (int) control1.get(ScrollableList.class, "dropdown").getItem(n).get("value"); 
   c2 = (int) control2.get(ScrollableList.class, "dropdown").getItem(n).get("value"); 
}
*/
class Cereal { 
  String name, mfr,type;
  float calories,protein,fat,sodium,fiber,carbohydrates,sugars,shelf,potassium,vitamins,weight,cups;
 // float[] properties = {0,0,0,0,0,0,0,0,0,0,0,0};

  // Here's a rediculously large constructor to accept all the properties of a cereal object.
  Cereal(String tmpname, String tmpmfr, String tmptype,
  float tmpcalories, float tmpprotein,float tmpfat,
  float tmpsodium,float tmpfiber,float tmpcarbo,float tmpsugars,
  float tmpshelf, float tmppotass, float tmpvitamins, float tmpweight, float tmpcups) { 
  
  name = tmpname;
  mfr = tmpmfr;
  type = tmptype;
  calories = tmpcalories;
  protein = tmpprotein;
  fat = tmpfat;
  sodium = tmpsodium;
  fiber = tmpfiber;
  carbohydrates = tmpcarbo;
  sugars = tmpsugars;
  shelf = tmpshelf;
  potassium = tmppotass;
  vitamins = tmpvitamins;
  weight = tmpweight;
  cups = tmpcups;
 
  /*
  properties[0] = calories;
  properties[1] = protein;
  properties[2] = fat;
  properties[3] = sodium;
  properties[4] = fiber;
  properties[5] = carbohydrates;
  properties[6] = sugars;
  properties[7] = shelf;
  properties[8] = potassium;
  properties[9] = vitamins;
  properties[10] = weight;
  properties[11] = cups;*/
  
  }
}